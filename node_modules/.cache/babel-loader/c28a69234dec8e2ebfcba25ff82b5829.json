{"remainingRequest":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\babel-loader\\lib\\index.js!E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\templateLoader.js??ref--6!E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js??ref--0-1!E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\src\\components\\Uploader.vue?vue&type=template&id=3c8050c4","dependencies":[{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\src\\components\\Uploader.vue","mtime":1664287276055},{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663604122860},{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\babel-loader\\lib\\index.js","mtime":1663604125594},{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\templateLoader.js","mtime":1663604132381},{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1663604122860},{"path":"E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\node_modules\\vue-cli-plugin-vue-next\\node_modules\\vue-loader\\dist\\index.js","mtime":1663604130545}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0IHsgcmVuZGVyU2xvdCBhcyBfcmVuZGVyU2xvdCwgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgd2l0aE1vZGlmaWVycyBhcyBfd2l0aE1vZGlmaWVycywgbWVyZ2VQcm9wcyBhcyBfbWVyZ2VQcm9wcywgb3BlbkJsb2NrIGFzIF9vcGVuQmxvY2ssIGNyZWF0ZUJsb2NrIGFzIF9jcmVhdGVCbG9jayB9IGZyb20gInZ1ZSI7CnZhciBfaG9pc3RlZF8xID0gewogIGNsYXNzOiAiZmlsZS11cGxvYWQiCn07Cgp2YXIgX2hvaXN0ZWRfMiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImJ1dHRvbiIsIHsKICBjbGFzczogImJ0biBidG4taW5mbyIsCiAgZGlzYWJsZWQ6ICIiCn0sICLmraPlnKjkuIrkvKAuLi4iLCAtMQovKiBIT0lTVEVEICovCik7Cgp2YXIgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImJ1dHRvbiIsIHsKICBjbGFzczogImJ0biBidG4taW5mbyIKfSwgIuS4iuS8oOaIkOWKnyIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCnZhciBfaG9pc3RlZF80ID0gLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgiYnV0dG9uIiwgewogIGNsYXNzOiAiYnRuIGJ0bi1pbmZvIgp9LCAi54K55Ye75LiK5LygIiwgLTEKLyogSE9JU1RFRCAqLwopOwoKZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihfY3R4LCBfY2FjaGUpIHsKICByZXR1cm4gX29wZW5CbG9jaygpLCBfY3JlYXRlQmxvY2soImRpdiIsIF9ob2lzdGVkXzEsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9tZXJnZVByb3BzKHsKICAgIGNsYXNzOiAiZmlsZS11cGxvYWQtY29udGFpbmVyIiwKICAgIG9uQ2xpY2s6IF9jYWNoZVsxXSB8fCAoX2NhY2hlWzFdID0gX3dpdGhNb2RpZmllcnMoZnVuY3Rpb24gKCRldmVudCkgewogICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgIH0KCiAgICAgIHJldHVybiBfY3R4LnRyaWdnZXJVcGxvYWQuYXBwbHkoX2N0eCwgWyRldmVudF0uY29uY2F0KGFyZ3MpKTsKICAgIH0sIFsicHJldmVudCJdKSkKICB9LCBfY3R4LiRhdHRycyksIFtfY3R4LmZpbGVTdGF0dXMgPT09ICdsb2FkaW5nJyA/IF9yZW5kZXJTbG90KF9jdHguJHNsb3RzLCAibG9hZGluZyIsIHsKICAgIGtleTogMAogIH0sIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbX2hvaXN0ZWRfMl07CiAgfSkgOiBfY3R4LmZpbGVTdGF0dXMgPT09ICdzdWNjZXNzJyA/IF9yZW5kZXJTbG90KF9jdHguJHNsb3RzLCAidXBsb2FkZWQiLCB7CiAgICBrZXk6IDEsCiAgICB1cGxvYWRlZERhdGE6IF9jdHgudXBsb2FkZWREYXRhCiAgfSwgZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIFtfaG9pc3RlZF8zXTsKICB9KSA6IF9yZW5kZXJTbG90KF9jdHguJHNsb3RzLCAiZGVmYXVsdCIsIHsKICAgIGtleTogMgogIH0sIGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiBbX2hvaXN0ZWRfNF07CiAgfSldLCAxNgogIC8qIEZVTExfUFJPUFMgKi8KICApLCBfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgdHlwZTogImZpbGUiLAogICAgY2xhc3M6ICJmaWxlLWlucHV0IGQtbm9uZSIsCiAgICByZWY6ICJmaWxlSW5wdXQiLAogICAgb25DaGFuZ2U6IF9jYWNoZVsyXSB8fCAoX2NhY2hlWzJdID0gZnVuY3Rpb24gKCRldmVudCkgewogICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbjIgPiAxID8gX2xlbjIgLSAxIDogMCksIF9rZXkyID0gMTsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgIGFyZ3NbX2tleTIgLSAxXSA9IGFyZ3VtZW50c1tfa2V5Ml07CiAgICAgIH0KCiAgICAgIHJldHVybiBfY3R4LmhhbmRsZUZpbGVDaGFuZ2UuYXBwbHkoX2N0eCwgWyRldmVudF0uY29uY2F0KGFyZ3MpKTsKICAgIH0pCiAgfSwgbnVsbCwgNTQ0CiAgLyogSFlEUkFURV9FVkVOVFMsIE5FRURfUEFUQ0ggKi8KICApXSk7Cn0="},{"version":3,"sources":["E:\\BaiduNetdiskDownload\\02.AI algorithm engineer\\02.python基础及技术\\04.Python web\\05.项目---最好是企业级完整项目\\Vue\\vue3.0+ts仿知乎专栏企业级项目\\仿知乎专栏企业级项目\\资料\\zheye-master\\src\\components\\Uploader.vue"],"names":[],"mappings":";;;AACO,EAAA,KAAK,EAAC;;;8BAGL,YAAA,CAAsD,QAAtD,EAAsD;AAA9C,EAAA,KAAK,EAAC,cAAwC;AAAzB,EAAA,QAAQ,EAAR;AAAyB,CAAtD,EAAsC,SAAtC,EAA6C,CAAA;AAAA;AAA7C,C;;8BAGA,YAAA,CAA0C,QAA1C,EAA0C;AAAlC,EAAA,KAAK,EAAC;AAA4B,CAA1C,EAA6B,MAA7B,EAAiC,CAAA;AAAA;AAAjC,C;;8BAGA,YAAA,CAA0C,QAA1C,EAA0C;AAAlC,EAAA,KAAK,EAAC;AAA4B,CAA1C,EAA6B,MAA7B,EAAiC,CAAA;AAAA;AAAjC,C;;;uBATN,YAAA,CAkBM,KAlBN,EAAA,UAAA,EAkBM,CAjBJ,YAAA,CAUM,KAVN,EAAA,WAAA,CAUM;AAVD,IAAA,KAAK,EAAC,uBAUL;AAV8B,IAAA,OAAK,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,cAAA,CAAA,UAAA,MAAA;AAAA,wCAAA,IAAA;AAAA,QAAA,IAAA;AAAA;;AAAA,aAAU,IAAA,CAAA,aAAA,OAAA,IAAA,GAAA,MAAA,SAAA,IAAA,EAAV;AAAA,KAAA,EAAuB,CAAA,SAAA,CAAvB,CAAA;AAUnC,GAVN,EAA0E,IAAA,CAAA,MAA1E,CAAA,EAAgF,CAClE,IAAA,CAAA,UAAA,KAAU,S,GAAtB,WAAA,CAEO,IAAA,CAAA,MAFP,EAEO,SAFP,EAEO;AAAA,IAAA,GAAA,EAAA;AAAA,GAFP,EAAA;AAAA,WAEO,CADL,UACK,CAFP;AAAA,GAAA,C,GAGiB,IAAA,CAAA,UAAA,KAAU,S,GAA3B,WAAA,CAEO,IAAA,CAAA,MAFP,EAEO,UAFP,EAEO;UAAA;AAFqD,IAAA,YAAY,EAAE,IAAA,CAAA;AAEnE,GAFP,EAAA;AAAA,WAEO,CADL,UACK,CAFP;AAAA,GAAA,C,GAGA,WAAA,CAEO,IAAA,CAAA,MAFP,EAEO,SAFP,EAEO;AAAA,IAAA,GAAA,EAAA;AAAA,GAFP,EAAA;AAAA,WAEO,CADL,UACK,CAFP;AAAA,GAAA,CAP8E,CAAhF,E;;AAAA,GAiBI,EANJ,YAAA,CAKC,OALD,EAKC;AAJC,IAAA,IAAI,EAAC,MAIN;AAHC,IAAA,KAAK,EAAC,mBAGP;AAFC,IAAA,GAAG,EAAC,WAEL;AADE,IAAA,QAAM,EAAA,MAAA,CAAA,CAAA,CAAA,KAAA,MAAA,CAAA,CAAA,CAAA,GAAA,UAAA,MAAA;AAAA,yCAAA,IAAA;AAAA,QAAA,IAAA;AAAA;;AAAA,aAAE,IAAA,CAAA,gBAAA,OAAA,IAAA,GAAA,MAAA,SAAA,IAAA,EAAF;AAAA,KAAA;AACR,GALD,E,IAAA,E;;AAAA,GAMI,CAlBN,C","sourcesContent":["<template>\n  <div class=\"file-upload\">\n    <div class=\"file-upload-container\" @click.prevent=\"triggerUpload\" v-bind=\"$attrs\">\n      <slot v-if=\"fileStatus === 'loading'\" name=\"loading\">\n        <button class=\"btn btn-info\" disabled>正在上传...</button>\n      </slot>\n      <slot v-else-if=\"fileStatus === 'success'\" name=\"uploaded\" :uploadedData=\"uploadedData\">\n        <button class=\"btn btn-info\">上传成功</button>\n      </slot>\n      <slot v-else name=\"default\">\n        <button class=\"btn btn-info\">点击上传</button>\n      </slot>\n    </div>\n    <input\n      type=\"file\"\n      class=\"file-input d-none\"\n      ref=\"fileInput\"\n      @change=\"handleFileChange\"\n    >\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, ref, PropType, watch } from 'vue'\nimport axios from 'axios'\ntype UploadStatus = 'ready' | 'loading' | 'success' | 'error'\ntype CheckFunction = (file: File) => boolean;\nexport default defineComponent({\n  props: {\n    action: {\n      type: String,\n      required: true\n    },\n    beforeUpload: {\n      type: Function as PropType<CheckFunction>\n    },\n    uploaded: {\n      type: Object\n    }\n  },\n  inheritAttrs: false,\n  emits: ['file-uploaded', 'file-uploaded-error'],\n  setup(props, context) {\n    const fileInput = ref<null | HTMLInputElement>(null)\n    console.log(props.uploaded)\n    const fileStatus = ref<UploadStatus>(props.uploaded ? 'success' : 'ready')\n    const uploadedData = ref(props.uploaded)\n    watch(() => props.uploaded, (newValue) => {\n      if (newValue) {\n        fileStatus.value = 'success'\n        uploadedData.value = newValue\n      }\n    })\n    const triggerUpload = () => {\n      if (fileInput.value) {\n        fileInput.value.click()\n      }\n    }\n    const handleFileChange = (e: Event) => {\n      const currentTarget = e.target as HTMLInputElement\n      if (currentTarget.files) {\n        const files = Array.from(currentTarget.files)\n        if (props.beforeUpload) {\n          const result = props.beforeUpload(files[0])\n          if (!result) {\n            return\n          }\n        }\n        fileStatus.value = 'loading'\n        const formData = new FormData()\n        formData.append('file', files[0])\n        axios.post(props.action, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        }).then(resp => {\n          fileStatus.value = 'success'\n          uploadedData.value = resp.data\n          context.emit('file-uploaded', resp.data)\n        }).catch((error) => {\n          fileStatus.value = 'error'\n          context.emit('file-uploaded-error', { error })\n        }).finally(() => {\n          if (fileInput.value) {\n            fileInput.value.value = ''\n          }\n        })\n      }\n    }\n    return {\n      fileInput,\n      triggerUpload,\n      fileStatus,\n      uploadedData,\n      handleFileChange\n    }\n  }\n})\n</script>\n"],"sourceRoot":""}]}